<div class="dashboard-container">
  <h2>Transaction Dashboard</h2>

  <!-- Filter Form -->
  <form [formGroup]="filterForm" (ngSubmit)="applyFilters()" class="filter-form">
    <label>
      From:
      <input type="date" formControlName="fromDate" />
    </label>
    <label>
      To:
      <input type="date" formControlName="toDate" />
    </label>
    <label>
      Barber:
      <select formControlName="barber">
        <option value="">All</option>
        <option *ngFor="let b of barbers" [value]="b._id">{{ b.name }}</option>
      </select>
    </label>
    <label>
      Payment Mode:
      <select formControlName="paymentMode">
        <option value="">All</option>
        <option value="Cash">Cash</option>
        <option value="Online">Online</option>
      </select>
    </label>
    <button type="submit">Apply</button>
    <button type="button" (click)="resetFilter()">Reset</button>
  </form>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="card"> Service Amount ₹{{ serviceTotalAmount }} </div>
    <div class="card">Total Product Cost: ₹{{ totalProductCost }}</div>
    <div class="card">Total Income: ₹{{ totalIncome }}</div>
    <div class="card">
      Commission:
      <ul>
        <li *ngFor="let c of barberCommission">{{ c.barberName }}: ₹{{ c.commission }}</li>
      </ul>
    </div>
  </div>
  <div *ngIf="noDataFound" class="no-data-message">
    <p>No transactions found for the selected filters.</p>
  </div>
  <!-- Transaction Table -->
  <div class="table-wrapper" *ngIf="!noDataFound">
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Barber</th>
          <th>Services</th>
          <th>Products</th>
          <th>Service ₹</th>
          <th>Product ₹</th>
          <th>Discount ₹</th>
          <th>Net Total ₹</th>
          <th>Mode</th>
          <th>Delete</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let txn of filteredTransactions">
          <td>{{ txn.date | date: 'dd/MM/yyyy' }}</td>
          <td>{{ txn.barberName }}</td>
          <td>
            <ul>
              <li *ngFor="let s of txn.serviceNames">{{ s }}</li>
            </ul>
          </td>
          <td>
            <ul>
              <li *ngFor="let p of txn.productNames">{{ p }}</li>
            </ul>
          </td>
          <td>{{ txn.serviceAmount }}</td>
          <td>{{ txn.totalProductAmount }}</td>
          <td>{{ txn.discount }}</td>
          <td>{{ txn.netTotal }}</td>
          <td>{{ txn.paymentMode }}</td>
          <td>
            <button class="delete-btn" (click)="deleteTransaction(txn._id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <button *ngIf="hasMore" (click)="loadMore()" class="load-more">Load More</button>
  </div>
</div>